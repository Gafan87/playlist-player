<!DOCTYPE html>
<html>
<head>
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { margin: 0; background: #000; overflow: hidden; }
    .player-wrapper { position: relative; width: 100%; height: 100vh; }
    .player-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    iframe { width: 100%; height: 100%; border: none; }
    #player-current { z-index: 2; transition: opacity 3s ease-out; }
    #player-next { z-index: 1; opacity: 0; }
    .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); pointer-events: none; z-index: 10; }
    .info { position: fixed; top: 20px; left: 20px; background: rgba(0,0,0,0.95); color: #fff; padding: 15px 20px; border-radius: 8px; font-size: 14px; z-index: 100; font-family: Arial; }
    .time { color: #0f0; font-weight: bold; font-size: 18px; }
    .status { color: #f90; font-size: 12px; margin-top: 5px; }
  </style>
</head>
<body>
  <div class="player-wrapper">
    <div class="player-container">
      <iframe id="player-current" width="100%" height="100%" src="" allowfullscreen referrerpolicy="strict-origin-when-cross-origin"></iframe>
    </div>
    <div class="player-container">
      <iframe id="player-next" width="100%" height="100%" src="" allowfullscreen referrerpolicy="strict-origin-when-cross-origin"></iframe>
    </div>
  </div>
  <div class="overlay"></div>
  
  <div class="info">
    <div>üéµ –¢—Ä–µ–∫: <strong id="track-name">–ó–∞–≥—Ä—É–∑–∫–∞...</strong></div>
    <div>‚è±Ô∏è –û—Å—Ç–∞–ª–æ—Å—å: <span class="time" id="countdown">00:00</span></div>
    <div class="status" id="status"></div>
  </div>

  <script>
    // –≠–º—É–ª—è—Ü–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (Android Chrome)
    var mobileUserAgent = 'Mozilla/5.0 (Linux; Android 13; SM-G991B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Mobile Safari/537.36';
    
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º User-Agent –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    Object.defineProperty(navigator, 'userAgent', {
      get: function() { return mobileUserAgent; }
    });

    var tracks = [
      { id: 'S69w0zMW-A0', start: 0, duration: 15, name: 'Titanium Remix' },
      { id: 'MvofQDdXSR4', start: 15, duration: 75, name: 'EDM Mix' }
    ];
    
    var current = 0;
    var endTime;
    var countdownInterval;
    var fadeTransitionDuration = 3; // 3 —Å–µ–∫—É–Ω–¥—ã –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
    var nextTrackLoaded = false;
    var loadDelay = 500; // –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–µ–æ (–º—Å)

    function generateRandomSession() {
      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º "—Å–ª—É—á–∞–π–Ω—ã–π" session ID, –∫–∞–∫ –±—ã —á–µ–ª–æ–≤–µ–∫ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç
      return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
    }

    function addAntiBot() {
      // –≠–º—É–ª—è—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏–π –º—ã—à–∏ (–Ω–µ —Ä–æ–±–æ—Ç)
      document.addEventListener('click', function() {});
      document.addEventListener('scroll', function() {});
      document.addEventListener('touchstart', function() {});
      
      // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ "–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ–º" —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π
      setInterval(function() {
        var event = new MouseEvent('mousemove', {
          view: window,
          bubbles: true,
          cancelable: true,
          clientX: Math.random() * window.innerWidth,
          clientY: Math.random() * window.innerHeight
        });
        document.dispatchEvent(event);
      }, 10000 + Math.random() * 5000); // –ö–∞–∂–¥—ã–µ 10-15 —Å–µ–∫
    }

    function loadTrack(idx) {
      clearInterval(countdownInterval);
      
      if (idx >= tracks.length) {
        document.getElementById('track-name').innerText = '‚úÖ –ü–ª–µ–π–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω!';
        document.getElementById('countdown').innerText = '--:--';
        document.getElementById('status').innerText = '';
        return;
      }
      
      current = idx;
      var track = tracks[idx];
      
      document.getElementById('status').innerText = '–ó–∞–≥—Ä—É–∑–∫–∞...';
      
      // –î–æ–±–∞–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ç–∏–≤ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ç–æ–≤
      var url = `https://www.youtube.com/embed/${track.id}?start=${track.start}&autoplay=1&controls=1&rel=0&modestbranding=1&enablejsapi=1&origin=${window.location.origin}`;
      
      document.getElementById('player-current').src = url;
      document.getElementById('player-current').style.opacity = '1';
      document.getElementById('player-next').style.opacity = '0';
      document.getElementById('track-name').innerText = track.name;
      
      nextTrackLoaded = false;
      
      // –¢–∞–π–º–µ—Ä
      endTime = Date.now() + (track.duration * 1000);
      startCountdown();
    }

    function startCountdown() {
      countdownInterval = setInterval(function() {
        var remaining = Math.max(0, Math.round((endTime - Date.now()) / 1000));
        var mins = Math.floor(remaining / 60);
        var secs = remaining % 60;
        document.getElementById('countdown').innerText = 
          (mins < 10 ? '0' : '') + mins + ':' + (secs < 10 ? '0' : '') + secs;
        
        // –ó–∞ 3 —Å–µ–∫ –¥–æ –∫–æ–Ω—Ü–∞ - –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Ç—Ä–µ–∫
        if (remaining <= fadeTransitionDuration && remaining > 0 && current + 1 < tracks.length && !nextTrackLoaded) {
          nextTrackLoaded = true;
          
          setTimeout(function() {
            var nextTrack = tracks[current + 1];
            var nextUrl = `https://www.youtube.com/embed/${nextTrack.id}?start=${nextTrack.start}&autoplay=0&controls=0&rel=0&modestbranding=1&enablejsapi=1&origin=${window.location.origin}`;
            document.getElementById('player-next').src = nextUrl;
            document.getElementById('status').innerText = '‚è≥ –ü–µ—Ä–µ—Ö–æ–¥...';
          }, loadDelay);
        }
        
        // –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ, –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ
        if (remaining <= fadeTransitionDuration && remaining > 0 && nextTrackLoaded) {
          var fadeProgress = (fadeTransitionDuration - remaining) / fadeTransitionDuration;
          document.getElementById('player-current').style.opacity = 1 - fadeProgress;
          document.getElementById('player-next').style.opacity = fadeProgress;
        }
        
        // –ö–æ–≥–¥–∞ —Ç–∞–π–º–µ—Ä –æ–∫–æ–Ω—á–µ–Ω - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–µ–¥—ã–¥—É—â–∏–º
        if (remaining <= 0) {
          clearInterval(countdownInterval);
          document.getElementById('player-current').src = document.getElementById('player-next').src;
          document.getElementById('player-current').style.opacity = '1';
          document.getElementById('player-next').src = '';
          document.getElementById('player-next').style.opacity = '0';
          
          current++;
          if (current < tracks.length) {
            loadTrack(current);
          }
        }
      }, 100);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω—Ç–∏-–±–æ—Ç –∑–∞—â–∏—Ç—ã
    addAntiBot();
    
    // –ó–∞–ø—É—Å–∫
    loadTrack(0);
  </script>
</body>
</html>
