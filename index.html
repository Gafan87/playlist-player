<!DOCTYPE html>
<html>
<head>
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <style>
    body { margin: 0; background: #000; }
    .player-wrapper { position: relative; width: 100%; height: 100vh; }
    iframe { width: 100%; height: 100%; border: none; transition: opacity 0.3s ease; }
    iframe.fade-out { opacity: 0; }
    .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); pointer-events: none; z-index: 10; }
    .info { position: fixed; top: 20px; left: 20px; background: rgba(0,0,0,0.95); color: #fff; padding: 15px 20px; border-radius: 8px; font-size: 14px; z-index: 100; font-family: Arial; }
    .time { color: #0f0; font-weight: bold; font-size: 18px; }
    .status { color: #f90; font-size: 12px; margin-top: 5px; }
  </style>
</head>
<body>
  <div class="player-wrapper">
    <iframe id="player" width="100%" height="100%" src="" allowfullscreen referrerpolicy="strict-origin-when-cross-origin"></iframe>
  </div>
  <div class="overlay"></div>
  
  <div class="info">
    <div>üéµ –¢—Ä–µ–∫: <strong id="track-name">–ó–∞–≥—Ä—É–∑–∫–∞...</strong></div>
    <div>‚è±Ô∏è –û—Å—Ç–∞–ª–æ—Å—å: <span class="time" id="countdown">00:00</span></div>
    <div class="status" id="status"></div>
  </div>

  <script>
    var tracks = [
      { id: 'S69w0zMW-A0', start: 0, duration: 15, name: 'Titanium Remix' },
      { id: 'MvofQDdXSR4', start: 15, duration: 75, name: 'EDM Mix' }
    ];
    
    var current = 0;
    var endTime;
    var countdownInterval;
    var fadeTransitionDuration = 3000; // 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞

    function loadTrack(idx) {
      clearInterval(countdownInterval);
      
      if (idx >= tracks.length) {
        document.getElementById('track-name').innerText = '‚úÖ –ü–ª–µ–π–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω!';
        document.getElementById('countdown').innerText = '--:--';
        document.getElementById('status').innerText = '';
        return;
      }
      
      current = idx;
      var track = tracks[idx];
      
      document.getElementById('status').innerText = '–ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–∞...';
      document.getElementById('player').classList.remove('fade-out');
      
      // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π embed
      var url = `https://www.youtube.com/embed/${track.id}?start=${track.start}&autoplay=1&controls=1&rel=0&modestbranding=1`;
      
      document.getElementById('player').src = url;
      document.getElementById('track-name').innerText = track.name;
      
      // –¢–∞–π–º–µ—Ä
      endTime = Date.now() + (track.duration * 1000);
      startCountdown();
    }

    function startCountdown() {
      countdownInterval = setInterval(function() {
        var remaining = Math.max(0, Math.round((endTime - Date.now()) / 1000));
        var mins = Math.floor(remaining / 60);
        var secs = remaining % 60;
        document.getElementById('countdown').innerText = 
          (mins < 10 ? '0' : '') + mins + ':' + (secs < 10 ? '0' : '') + secs;
        
        // –ö–æ–≥–¥–∞ –¥–æ –∫–æ–Ω—Ü–∞ –æ—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–∞ (3 —Å–µ–∫) - –Ω–∞—á–∏–Ω–∞–µ–º fade out
        if (remaining <= Math.ceil(fadeTransitionDuration / 1000) && remaining > 0) {
          document.getElementById('status').innerText = '‚è≥ –ü–µ—Ä–µ—Ö–æ–¥...';
          document.getElementById('player').classList.add('fade-out');
        }
        
        // –ö–æ–≥–¥–∞ —Ç–∞–π–º–µ—Ä –æ–∫–æ–Ω—á–µ–Ω - –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è
        if (remaining <= 0) {
          clearInterval(countdownInterval);
          // –ó–∞–¥–µ—Ä–∂–∫–∞ = –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å fade + –≤—Ä–µ–º—è –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ
          setTimeout(function() {
            loadTrack(current + 1);
          }, fadeTransitionDuration + 200);
        }
      }, 500);
    }

    // –ó–∞–ø—É—Å–∫
    loadTrack(0);
  </script>
</body>
</html>
